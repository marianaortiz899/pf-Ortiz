import{a as g}from"./chunk-U5QPIUGZ.js";import{n as f,w as o}from"./chunk-RJSKI22Y.js";import{b as a}from"./chunk-OW7T7RJ3.js";import{a as u}from"./chunk-JAVY5PA6.js";import{E as l,ac as h,ca as c,fa as r,ic as p,q as n,u as m}from"./chunk-KXB77ZPS.js";var w=(()=>{let e=class e{constructor(t,i,d,A,I){this.router=t,this.alertsService=i,this.loadingService=d,this.HttpClient=A,this.store=I}setAuthUser(t){this.store.dispatch(o.setAuthUser({user:t})),localStorage.setItem("token",t.token)}login(t){this.HttpClient.get(`${a.apiURL}/users?email=${t.email}&password=${t.password}`).subscribe({next:i=>{i[0]?(this.setAuthUser(i[0]),this.router.navigate(["dashboard","home"])):this.alertsService.showError("EMAIL INVALIDO")}})}logout(){this.store.dispatch(o.logout()),this.router.navigate(["auth","login"]),localStorage.removeItem("token")}verifyToken(){return this.HttpClient.get(`${a.apiURL}/users?token=${localStorage.getItem("token")}`).pipe(m(t=>t.length?(this.setAuthUser(t[0]),!0):(this.store.dispatch(o.logout()),localStorage.removeItem("token"),!1)),l(()=>n(!1)))}};e.\u0275fac=function(i){return new(i||e)(r(p),r(g),r(u),r(h),r(f))},e.\u0275prov=c({token:e,factory:e.\u0275fac,providedIn:"root"});let s=e;return s})();export{w as a};
