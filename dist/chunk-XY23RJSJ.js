import{a as k}from"./chunk-FRWBXVHU.js";import{a as N}from"./chunk-C7CHWMTC.js";import{a as U}from"./chunk-3A6S76GP.js";import{$ as ce,Aa as we,Ca as ye,G as T,H as K,I as Q,J as W,K as X,L as Y,M as V,N as Z,O as ee,Q as te,R as ie,S as oe,T as re,W as ne,X as ae,Y as se,Z as me,_ as le,a as h,aa as de,ba as ue,ca as pe,da as fe,ea as Ce,fa as ge,ia as he,ja as ve,ka as _e,ta as Se,ua as xe,va as be,wa as Me,xa as De,ya as Ie,za as Ee}from"./chunk-U2C7WTHA.js";import{$a as w,Cb as J,E as $,Ea as d,G as P,Ga as u,Ob as R,Pa as n,Qa as a,R as z,Ra as f,S as b,Sa as _,Ta as S,U as O,Va as L,X as M,Y as D,Za as g,a as x,aa as I,b as H,ba as E,e as A,jb as s,lb as y,n as G,va as l,wa as c,zb as q}from"./chunk-7WN7TALM.js";var Te=A(U());var B=(()=>{let e=class e{constructor(o,i,r){this.fb=o,this.dialogRef=i,this.editingCourse=r,this.courseForm=this.fb.group({name:this.fb.control("",[V.required,k]),tname:this.fb.control("",[V.required,k])}),r&&this.courseForm.patchValue(r)}onSave(){this.courseForm.valid?this.dialogRef.close(this.courseForm.value):Te.default.fire({icon:"error",title:"Error",text:"Todos los campos deben ser completados."})}};e.\u0275fac=function(i){return new(i||e)(c(re),c(Se),c(xe))},e.\u0275cmp=M({type:e,selectors:[["app-course-dialog"]],decls:19,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"grid","formgrid",3,"formGroup"],[1,"col-12"],[1,"w-full"],["formControlName","name","matInput",""],["formControlName","tname","matInput",""],["mat-dialog-actions",""],["mat-dialog-close","","mat-button","","mat-raised-button",""],["mat-button","","mat-raised-button","",3,"click"]],template:function(i,r){i&1&&(n(0,"h1",0),s(1,"CURSOS"),a(),n(2,"div",1)(3,"form",2)(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),s(7,"Nombre del curso"),a(),f(8,"input",5),a()(),n(9,"div",3)(10,"mat-form-field",4)(11,"mat-label"),s(12,"Profesor adjunto"),a(),f(13,"input",6),a()()()(),n(14,"div",7)(15,"button",8),s(16,"Cancelar"),a(),n(17,"button",9),g("click",function(){return r.onSave()}),s(18,"Guardar"),a()()),i&2&&(l(3),u("formGroup",r.courseForm))},dependencies:[T,Me,De,Ee,Ie,he,ge,_e,te,Y,Z,ee,ie,oe]});let t=e;return t})();var v=A(U());var p=[{id:1,name:"Curso online de JavaScript",tname:"Valentina Morales"}],F=(()=>{let e=class e{constructor(o){this.loadingService=o}getCourses(){return this.loadingService.setIsLoading(!0),G(p).pipe($(1500),P(()=>this.loadingService.setIsLoading(!1)))}deleteCourseById(o){return p=p.filter(i=>i.id!=o),this.getCourses()}createCourse(o){return p=[...p,H(x({},o),{id:p.length+1})],this.getCourses()}updateCourseByID(o,i){return p=p.map(r=>r.id===o?x(x({},r),i):r),this.getCourses()}};e.\u0275fac=function(i){return new(i||e)(O(h))},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})();function ke(t,e){if(t&1){let m=L();n(0,"div",11)(1,"button",12),g("click",function(){I(m);let i=w();return E(i.onCreate())}),s(2," Agregar "),a()()}}function Be(t,e){t&1&&(n(0,"th",13),s(1," No. "),a())}function He(t,e){if(t&1&&(n(0,"td",14),s(1),a()),t&2){let m=e.$implicit;l(),y(" ",m.id," ")}}function Ae(t,e){t&1&&(n(0,"th",13),s(1," Nombre del curso "),a())}function Ge(t,e){if(t&1&&(n(0,"td",14),s(1),a()),t&2){let m=e.$implicit;l(),y(" ",m.name," ")}}function $e(t,e){t&1&&(n(0,"th",13),s(1," Profesor adjunto "),a())}function Pe(t,e){if(t&1&&(n(0,"td",14),s(1),a()),t&2){let m=e.$implicit;l(),y(" ",m.tname," ")}}function ze(t,e){t&1&&(n(0,"th",13),s(1," actions "),a())}function Oe(t,e){if(t&1){let m=L();n(0,"td",14)(1,"button",15),g("click",function(){let r=I(m).$implicit,C=w();return E(C.onDelete(r.id))}),n(2,"mat-icon"),s(3,"delete"),a()(),n(4,"button",16),g("click",function(){let r=I(m).$implicit,C=w();return E(C.onEdit(r))}),n(5,"mat-icon"),s(6,"edit"),a()()()}}function qe(t,e){t&1&&f(0,"tr",17)}function Je(t,e){t&1&&f(0,"tr",18)}function Ue(t,e){t&1&&(n(0,"div",19),f(1,"mat-spinner",20),a())}var Ne=(()=>{let e=class e{constructor(o,i,r){this.coursesService=o,this.loadingService=i,this.dialog=r,this.displayedColumns=["id","courseName","teacherName","actions"],this.isLoading=!1,this.courses=[],this.loadingService.setIsLoading(!0),this.coursesService.getCourses().subscribe({next:C=>{this.courses=C},complete:()=>{this.loadingService.setIsLoading(!1)}})}ngOnInit(){this.loadingService.setIsLoading(!0),this.loadingService.isLoading$.subscribe(o=>{this.isLoading=o}),this.coursesService.getCourses().subscribe({next:o=>{this.courses=o},complete:()=>{this.loadingService.setIsLoading(!1)}})}onCreate(){this.dialog.open(B).afterClosed().subscribe({next:o=>{o&&this.coursesService.createCourse(o).subscribe({next:i=>this.courses=i})}})}onEdit(o){this.dialog.open(B,{data:o}).afterClosed().subscribe({next:i=>{i&&this.coursesService.updateCourseByID(o.id,i).subscribe({next:r=>{this.courses=r,v.default.fire("Exito","El curso se edit\xF3 correctamente","success")},error:r=>{v.default.fire("Error","Hubo un problema al editar el curso","error")}})}})}onDelete(o){v.default.fire({title:"\xBFEst\xE1s seguro?",text:"Esta acci\xF3n no se puede deshacer",icon:"warning",showCancelButton:!0,confirmButtonText:"Aceptar",cancelButtonText:"Cancelar"}).then(i=>{i.isConfirmed&&this.coursesService.deleteCourseById(o).subscribe({next:r=>{this.courses=r,v.default.fire("Realizado","Se elimin\xF3 correctamente","success")},error:r=>{v.default.fire("Error","Hubo un problema al eliminar el curso","error")}})})}};e.\u0275fac=function(i){return new(i||e)(c(F),c(h),c(be))},e.\u0275cmp=M({type:e,selectors:[["app-courses"]],decls:17,vars:5,consts:[["class","flex justify-content-end m-3",4,"ngIf"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","courseName"],["matColumnDef","teacherName"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","app-loading",4,"ngIf"],[1,"flex","justify-content-end","m-3"],["mat-button","",3,"click"],["mat-header-cell",""],["mat-cell",""],["color","primary","mat-icon-button","",3,"click"],["color","accent","mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row",""],[1,"app-loading"],["color","accent",1,"example-margin"]],template:function(i,r){i&1&&(d(0,ke,3,0,"div",0),n(1,"table",1),_(2,2),d(3,Be,2,0,"th",3)(4,He,2,1,"td",4),S(),_(5,5),d(6,Ae,2,0,"th",3)(7,Ge,2,1,"td",4),S(),_(8,6),d(9,$e,2,0,"th",3)(10,Pe,2,1,"td",4),S(),_(11,7),d(12,ze,2,0,"th",3)(13,Oe,7,0,"td",4),S(),d(14,qe,1,0,"tr",8)(15,Je,1,0,"tr",9),a(),d(16,Ue,2,0,"div",10)),i&2&&(u("ngIf",!r.isLoading),l(),u("dataSource",r.courses),l(13),u("matHeaderRowDef",r.displayedColumns),l(),u("matRowDefColumns",r.displayedColumns),l(),u("ngIf",r.isLoading))},dependencies:[q,ne,se,de,me,ae,ue,le,ce,pe,fe,W,T,K,N]});let t=e;return t})();var Ke=[{path:"courses",component:Ne}],je=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=D({type:e}),e.\u0275inj=b({imports:[R.forChild(Ke),R]});let t=e;return t})();var yt=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=D({type:e}),e.\u0275inj=b({providers:[F,h],imports:[J,Ce,X,Q,we,ve,ye,N,je]});let t=e;return t})();export{yt as a};
